function postList(url, cves) {
  var form = document.getElementById("filter");
  form.action = url;
  document.body.appendChild(form);
  var list = document.createElement("INPUT");
  list.type = "hidden";
  list.name = "list"
  list.value = cves
  form.appendChild(list);
  form.submit();
}
//Selectable table
$(document).ready(function() {
  var duration = 500;
  $('#CVEs tbody').on( 'click', 'tr', function () {
    if($('#markseen').is(':checked') || $('#markunseen').is(':checked')){
      $(this).toggleClass('selected');
      var rows= $('#CVEs tbody tr.selected');
      if (rows.length > 0) {
        $('.select-submit').fadeIn(duration);
      } else {
        $('.select-submit').fadeOut(duration);
      }
    }
  });
  $('.select-submit').click( function () {
    var rows= $('#CVEs tbody tr.selected');
    var cvelist=[];
    for (i=0;i<rows.length;i++){
      cvelist.push(rows[i].cells[1].innerHTML.replace(/<\/?[^>]+(>|$)/g, "").trim());
    }
    var r=getr();
    var url = ""
    if($('#markseen').is(':checked')){url="seen";}
    else if($('#markunseen').is(':checked')){url="unseen";}
    else{return false;}
    
    postList("/r/"+r+"/"+url,cvelist);
    for (x in cvelist){
      $('#'+cvelist[x]).removeClass('selected');
    }
    return false;
  });
});
